{% extends 'base.html' %}
{% block title %}HOME{% endblock %}

{% load static %}

{% block content %}


<div class="container-custom">
    <button class="arrow-left control" aria-label="Previous image">
        <svg height="100%" width="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M11 9L8 12M8 12L11 15M8 12H16M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
    </button>
    <button class="arrow-right control" aria-label="Next image">
        <svg height="100%" width="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M13 15L16 12M16 12L13 9M16 12H8M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
    </button>
    <div class="gallery-wrapper">
    <div class="gallery">
        <img src="{% static 'banner1.png' %}" class="item">
        <img src="{% static 'banner2.png' %}" class="item">
        <img src="{% static 'banner3.png' %}" class="item">
    </div>
    </div>
    </div>
<script src="{% static 'banner.js' %}"></script>

<div class="container">
    <h1 class="text-center">SEJA BEM VINDO AO SISTEMA DE VENDAS EM DJANGO</h1>
    <hr>
    <div class="row mt-3 justify-content-center align-items-center">
        {% for p in page_obj %}

        <div class="col-lg-4 col-md-4 col-sm-6 col-12">
            <a href="{% url 'lojaapp:produtodetalhe' p.slug %}" style="color:currentColor; text-decoration:none; display: block;">
            <div class="m-3 text-center shadow" style="height: 400px;">
                <img style="height: 200px; object-fit: cover;" class="zoom-effect img-fluid mt-3 mb-2" src="{{ p.image.url }}" alt="">
                <h4 style="max-height: 3em; overflow: hidden; text-overflow: ellipsis;">{{ p.titulo|truncatechars:30}}</h4>
                <p class="mt-3">Pre√ßo: <strike>R$ {{ p.preco_mercado }}</strike> R$ {{ p.venda }}</p>

                <form action="{% url 'lojaapp:addcarro' p.id %}" method="get" >
                <button class="btn btn-success" style="position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); width:40%">
                    Comprar
                </button>
            </form>

                </div>
        </a>
        </div>

        {% endfor %}
    </div>
</div>


<style>
    @media (max-width: 577px) {
        .col-lg-3, .col-md-4, .col-sm-6, .col-12 {
            flex: 0 0 50%;
            max-width: 50%;
        }
        .m-3 {
            margin: 1px 1px 30px !important;
        }
    }
</style>

<nav aria-label="Page navigation example">
  <ul class="pagination">

      {% if page_obj.has_previous %}
      <li class="page-item">
      <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only"></span>
      </a>
    </li>
      {% else %}
      <li class="page-item disabled">
      <a class="page-link" href="" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only"></span>
      </a>
    </li>
      {% endif %}

      {% if page_obj.number == 1 %}
    {% for pagina in page_obj.paginator.page_range|slice:":5" %}
        {% ifequal pagina page_obj.number %}
            <li class="page-item active"><a class="page-link" href="?page={{ pagina }}">{{ pagina }} <span class="sr-only"></span></a></li>
        {% else %}
            <li class="page-item"><a class="page-link" href="?page={{ pagina }}">{{ pagina }}</a></li>
        {% endifequal %}
    {% endfor %}
    {% endif %}

      {% if page_obj.number == page_obj.paginator.num_pages and page_obj.number != 1%}
    {% for pagina in page_obj.paginator.page_range|slice:"-5:" %}
        {% if pagina == page_obj.number %}
            <li class="page-item active"><a class="page-link" href="?page={{ pagina }}">{{ pagina }} <span class="sr-only"></span></a></li>
        {% else %}
            <li class="page-item"><a class="page-link" href="?page={{ pagina }}">{{ pagina }}</a></li>
        {% endif %}
    {% endfor %}
      {% endif %}

      {% if page_obj.number == 2 %}
      {% for pagina in page_obj.paginator.page_range %}
    {% if page_obj.number == pagina %}
        <li class="page-item active"><a class="page-link" href="?page={{ pagina }}">{{ pagina }} <span class="sr-only"></span></a></li>
    {% elif pagina > page_obj.number|add:"-3" and pagina < page_obj.number|add:"4" %}
        <li class="page-item"><a class="page-link" href="?page={{ pagina }}">{{ pagina }}</a></li>
    {% endif %}
    {% endfor %}
    {%endif%}

      {% with previous_page=page_obj.paginator.num_pages|add:"-1" %}
      {% if page_obj.number == previous_page %}
      {% for pagina in page_obj.paginator.page_range %}
    {% if page_obj.number == pagina %}
        <li class="page-item active"><a class="page-link" href="?page={{ pagina }}">{{ pagina }} <span class="sr-only"></span></a></li>
    {% elif pagina > page_obj.number|add:"-4" and pagina < page_obj.number|add:"4" %}
        <li class="page-item"><a class="page-link" href="?page={{ pagina }}">{{ pagina }}</a></li>
    {% endif %}
    {% endfor %}
    {%endif%}

    {% if page_obj.number != page_obj.paginator.num_pages and page_obj.number != 1 and page_obj.number != 2 and page_obj.number != previous_page %}
      {% for pagina in page_obj.paginator.page_range %}
    {% if page_obj.number == pagina %}
        <li class="page-item active"><a class="page-link" href="?page={{ pagina }}">{{ pagina }} <span class="sr-only"></span></a></li>
    {% elif pagina > page_obj.number|add:"-3" and pagina < page_obj.number|add:"3" %}
        <li class="page-item"><a class="page-link" href="?page={{ pagina }}">{{ pagina }}</a></li>
    {% endif %}
    {% endfor %}
    {%endif%}
      {% endwith %}

      {% if page_obj.has_next %}
      <li class="page-item">
      <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only"></span>
      </a>
    </li>
      {% else %}
      <li class="page-item disabled">
      <a class="page-link" href="" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only"></span>
      </a>
    </li>
      {% endif %}

  </ul>
</nav>

{% endblock %}
